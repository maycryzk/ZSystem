KindEditor.plugin("preview",function(K){var self=this,name="preview",undefined;self.clickToolbar(name,function(){var lang=self.lang(name+"."),html='<div style="padding:10px 20px;"><iframe class="ke-textarea" frameborder="0" style="width:708px;height:400px;"></iframe></div>',dialog=self.createDialog({name:name,width:750,title:self.lang(name),body:html}),iframe=K("iframe",dialog.div),doc=K.iframeDoc(iframe);doc.open();doc.write(self.fullHtml());doc.close();var doc2=self.edit.cmd.doc;$("head",doc).append("<base href='"+$("head",doc2).find("base").attr("href")+"'/>");var images=doc.images||[];for(var i=0;i<images.length;i++){images[i].src=images[i].src;}K(doc.body).css("background-color","#FFF");iframe[0].contentWindow.focus();});});